# -*- coding: utf-8 -*-
"""sales_prediction_app

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1C-2s0VZMTUQhxXXMhQEj0A9P3-SYTuji
"""

import streamlit as st
import joblib
import pandas as pd

# Load model, scaler, and columns
model = joblib.load("sales_classifier.joblib")
scaler = joblib.load("scaler.joblib")
columns = joblib.load("columns.joblib")

st.title("Sales Classification App")
st.write("Predict sales class (Low / Medium / High)")

# Example input (you can add more features later)
item_weight = st.number_input("Item Weight", min_value=0.0, max_value=100.0, step=0.1)
item_visibility = st.number_input("Item Visibility", min_value=0.0, max_value=1.0, step=0.01)
item_mrp = st.number_input("Item MRP", min_value=0.0, max_value=1000.0, step=1.0)

if st.button("Predict Sales Class"):
    # Build input dataframe
    input_data = pd.DataFrame([[item_weight, item_visibility, item_mrp]],
                              columns=["Item_Weight", "Item_Visibility", "Item_MRP"])

    # Align with training columns
    input_data = pd.get_dummies(input_data, drop_first=True)
    input_data = input_data.reindex(columns=columns, fill_value=0)

    # Scale input
    input_scaled = scaler.transform(input_data)

    # Predict
    pred = model.predict(input_scaled)[0]
    st.success(f"Predicted Sales Class: {pred}")